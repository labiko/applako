<ion-content [fullscreen]="true" class="modern-login-content">
  <!-- Background effects -->
  <div class="login-background">
    <div class="gradient-overlay"></div>
    <div class="geometric-shapes">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
      <div class="shape shape-3"></div>
    </div>
  </div>

  <div class="login-container">
    <!-- Header with back button -->
    <div class="header-section">
      <ion-button 
        fill="clear" 
        (click)="goBack()" 
        class="back-button">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </div>

    <!-- Modern login card -->
    <div class="login-card">
      <div class="card-background"></div>
      
      <!-- Logo and title -->
      <div class="brand-header">
        <div class="logo-wrapper">
          <div class="logo-circle">
            <ion-icon [name]="userType === 'conducteur' ? 'car-sport' : 'business'" class="brand-icon"></ion-icon>
          </div>
          <div class="logo-glow"></div>
        </div>
        
        <div class="brand-info">
          <h1 class="brand-name">LokoTaxi</h1>
          <p class="space-type">{{ userType === 'conducteur' ? 'Espace Conducteur' : 'Espace Entreprise' }}</p>
          <div class="type-badge" [class.conducteur]="userType === 'conducteur'" [class.entreprise]="userType === 'entreprise'">
            <ion-icon [name]="userType === 'conducteur' ? 'person' : 'business'"></ion-icon>
            <span>{{ userType === 'conducteur' ? 'Conducteur' : 'Entreprise' }}</span>
          </div>
        </div>
      </div>


      <!-- Login Form -->
      <div class="form-section">
      
        <!-- Message simple de blocage -->
        <div *ngIf="blockedInfo && userType === 'conducteur'" class="simple-blocked-alert">
          <ion-icon name="ban"></ion-icon>
          <span>Acc√®s bloqu√©: {{ blockedInfo.motif || 'Motif non sp√©cifi√©' }}</span>
        </div>
      
        <form (ngSubmit)="onLogin()" #loginForm="ngForm" class="modern-form">
          <!-- Dynamic input field -->
          <div class="input-container">
            <!-- Phone input (conducteur only) -->
            <div class="modern-input-group" *ngIf="userType === 'conducteur'">
              <div class="input-wrapper">
                <div class="input-prefix">
                  <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgiIGhlaWdodD0iMTgiIGZpbGw9IiNDRTExMjYiLz4KPHJlY3QgeD0iOCIgd2lkdGg9IjgiIGhlaWdodD0iMTgiIGZpbGw9IiNGRkNFMDAiLz4KPHJlY3QgeD0iMTYiIHdpZHRoPSI4IiBoZWlnaHQ9IjE4IiBmaWxsPSIjMDA5NjM5Ii8+Cjwvc3ZnPgo=" alt="üá¨üá≥" class="country-flag">
                </div>
                <input 
                  type="tel" 
                  [(ngModel)]="credentials.phone" 
                  name="phone"
                  [required]="userType === 'conducteur'"
                  placeholder="Num√©ro de t√©l√©phone"
                  class="modern-input">
                <div class="input-suffix">
                  <ion-icon name="call" class="input-icon"></ion-icon>
                </div>
              </div>
              <div class="input-label">T√©l√©phone</div>
            </div>

            <!-- Email input (entreprise only) -->
            <div class="modern-input-group" *ngIf="userType === 'entreprise'">
              <div class="input-wrapper">
                <input 
                  type="email" 
                  [(ngModel)]="credentials.email" 
                  name="email"
                  required
                  placeholder="Email de l'entreprise"
                  class="modern-input">
                <div class="input-suffix">
                  <ion-icon name="mail" class="input-icon"></ion-icon>
                </div>
              </div>
              <div class="input-label">Email entreprise</div>
            </div>

            <!-- Password input (optional for conducteur - may be null in database) -->
            <div class="modern-input-group" *ngIf="userType === 'conducteur'">
              <div class="input-wrapper">
                <input 
                  [type]="showPassword ? 'text' : 'password'"
                  [(ngModel)]="credentials.password" 
                  name="password"
                  placeholder="Mot de passe (optionnel si premi√®re connexion)"
                  class="modern-input">
                <div class="input-suffix">
                  <ion-button 
                    fill="clear" 
                    (click)="togglePassword()"
                    class="password-toggle">
                    <ion-icon [name]="showPassword ? 'eye-off' : 'eye'"></ion-icon>
                  </ion-button>
                </div>
              </div>
              <div class="input-label">Mot de passe</div>
            </div>

            <!-- Optional password for entreprise -->
            <div class="modern-input-group" *ngIf="userType === 'entreprise'">
              <div class="input-wrapper">
                <input 
                  [type]="showPassword ? 'text' : 'password'"
                  [(ngModel)]="credentials.password" 
                  name="password"
                  placeholder="Mot de passe (optionnel pour premi√®re connexion)"
                  class="modern-input">
                <div class="input-suffix">
                  <ion-button 
                    fill="clear" 
                    (click)="togglePassword()"
                    class="password-toggle">
                    <ion-icon [name]="showPassword ? 'eye-off' : 'eye'"></ion-icon>
                  </ion-button>
                </div>
              </div>
              <div class="input-label">Mot de passe</div>
            </div>
          </div>

          <!-- Modern login button -->
          <div class="button-container">
            <button 
              type="submit" 
              [disabled]="!isFormValid() || isLoading"
              class="modern-login-button"
              [class.loading]="isLoading">
              
              <div class="button-content">
                <ion-spinner name="crescent" *ngIf="isLoading" class="button-spinner"></ion-spinner>
                <ion-icon name="log-in" *ngIf="!isLoading" class="button-icon"></ion-icon>
                <span class="button-text">
                  {{ isLoading ? 'Connexion en cours...' : 'Se connecter' }}
                </span>
              </div>
              
              <div class="button-glow"></div>
            </button>
          </div>

          <!-- Error Message -->
          <div *ngIf="errorMessage" class="modern-error-message">
            <div class="error-content">
              <ion-icon name="alert-circle" class="error-icon"></ion-icon>
              <span class="error-text">{{ errorMessage }}</span>
            </div>
          </div>
        </form>
      </div>

      <!-- Footer info -->
      <div class="footer-info">
        <div class="location-info">
          <ion-icon name="location"></ion-icon>
          <span>Conakry, Guin√©e</span>
        </div>
        <p class="version-info">Version 2.0.0</p>
      </div>
    </div>
  </div>
</ion-content>